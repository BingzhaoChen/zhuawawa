{"version":3,"sources":["../../../assets/assets/game.js"],"names":["cc","Class","extends","Component","properties","audio_click","url","AudioClip","default","audio_readygo","zhua_line","type","Sprite","zhuazi","zhua_top","zhuanchang_name","Label","cost_num","coin_num","wawa_prefab","Prefab","result_prefab","prize","Node","xiazhua_btn","Button","shake_zhuazi_seq","shake_zhualine_seq","shake_zhuatop_seq","shake_wawa_seq","orign_zhuazi_pos","orign_zhualine_pos","orign_zhuatop_pos","prize_list_layout_pos","orign_zhualine_scale_y","prize_bar","prize_list_layout","Layout","lottery_data","zhua_click","shake","repeatForever","sequence","moveBy","node","runAction","setCascadeOpacityEnabled","opacity","container_width","width","console","log","onLoad","position","orign_zhualine_height","height","initData","sendHttpReq","data","_cb","that","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","responseText","JSON","parse","open","setRequestHeader","paramArr","tmp","push","params","join","send","getLotteryId","la","window","location","href","start","indexOf","end","id","substr","respObj","resp","gameObj","string","i","parseInt","wawa","instantiate","setPosition","p","getComponent","setData","addChild","setTimeout","zhuawawa_go","stopAction","prize_bar_height","zhuazi_height","target_y","y","target_x","x","rotateX","wawaZhantaiHeight","zhuazi_action","moveTo","rotateTo","half_win_height","director","getWinSizeInPixels","win_fixed","zhualine_x","zhualine_action","spawn","scaleTo","result","resetGame","zhuawawa","audioEngine","play","scaleY","destroy","charge","detail","show_detail"],"mappings":"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","file":"game.js","sourceRoot":"../../../assets","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n\textends: cc.Component,\n\n\tproperties: {\n\t\taudio_click:{\n\t\t\turl:cc.AudioClip,\n\t\t\tdefault:null,\n\t\t},\n\t\taudio_readygo:{\n\t\t\turl:cc.AudioClip,\n\t\t\tdefault:null,\n\t\t},\n\t\tzhua_line:{\n\t\t\ttype:cc.Sprite,\n\t\t\tdefault:null,\n\t\t},\n\t\tzhuazi:{\n\t\t\ttype:cc.Sprite,\n\t\t\tdefault:null,\n\t\t},\n\t\tzhua_top:{\n\t\t\ttype:cc.Sprite,\n\t\t\tdefault:null,\n\t\t},\n\t\tzhuanchang_name:{\n\t\t\ttype:cc.Label,\n\t\t\tdefault:null,\n\t\t},\n\t\tcost_num:{\n\t\t\ttype:cc.Label,\n\t\t\tdefault:null,\n\t\t},\n\t\tcoin_num:{\n\t\t\ttype:cc.Label,\n\t\t\tdefault:null,\n\t\t},\n\t\twawa_prefab:{\n\t\t\ttype:cc.Prefab,\n\t\t\tdefault:null,\n\t\t},\n\t\tresult_prefab:{\n\t\t\ttype:cc.Prefab,\n\t\t\tdefault:null,\n\t\t},\n\t\tprize:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:null,\n\t\t},\n\t\txiazhua_btn:cc.Button,\n\t\tshake_zhuazi_seq:null,\n\t\tshake_zhualine_seq:null,\n\t\tshake_zhuatop_seq:null,\n\t\tshake_wawa_seq:null,\n\t\torign_zhuazi_pos:null,\n\t\torign_zhualine_pos:null,\n\t\torign_zhuatop_pos:null,\n\t\tprize_list_layout_pos:null,\n\t\torign_zhualine_scale_y:0,\n\t\tprize_bar:{\n\t\t\ttype:cc.Sprite,\n\t\t\tdefault:null,\n\t\t},\n\t\tprize_list_layout:{\n\t\t\ttype:cc.Layout,\n\t\t\tdefault:null,\n\t\t},\n\t\tlottery_data:null,\n\t\tzhua_click:0,\n\t},\n\n\t// LIFE-CYCLE CALLBACKS:\n\tshake(){\n\t\t// 爪子开始左右晃动\n\t\tthis.shake_zhuazi_seq = cc.repeatForever(\n\t\t\tcc.sequence(\n\t\t\t\tcc.moveBy(1, -100, 0),\n\t\t\t\tcc.moveBy(1, 100, 0),\n\t\t\t\tcc.moveBy(1, 100, 0),\n\t\t\t\tcc.moveBy(1, -100, 0),\n\t\t\t\t));\n\t\tthis.shake_zhualine_seq = cc.repeatForever(\n\t\t\tcc.sequence(\n\t\t\t\tcc.moveBy(1, -100, 0),\n\t\t\t\tcc.moveBy(1, 100, 0),\n\t\t\t\tcc.moveBy(1, 100, 0),\n\t\t\t\tcc.moveBy(1, -100, 0),\n\t\t\t\t));\n\t\tthis.shake_zhuatop_seq = cc.repeatForever(\n\t\t\tcc.sequence(\n\t\t\t\tcc.moveBy(1, -100, 0),\n\t\t\t\tcc.moveBy(1, 100, 0),\n\t\t\t\tcc.moveBy(1, 100, 0),\n\t\t\t\tcc.moveBy(1, -100, 0),\n\t\t\t\t));\n\t\tthis.zhuazi.node.runAction(this.shake_zhuazi_seq);\n\t\tthis.zhua_top.node.runAction(this.shake_zhuatop_seq);\n\t\tthis.zhua_line.node.runAction(this.shake_zhualine_seq);\n\t\tthis.prize_list_layout.node.setCascadeOpacityEnabled(false);\n\t\tthis.prize_list_layout.node.opacity = 0;\n\n\t\tvar container_width = this.prize_list_layout.node.width;\n\t\tconsole.log(container_width);\n\t\tthis.shake_wawa_seq = cc.repeatForever(\n\t\t\tcc.sequence(\n\t\t\t\tcc.moveBy(2, -(container_width/3), 0),\n\t\t\t\tcc.moveBy(2, container_width/3, 0),\n\t\t\t\tcc.moveBy(2, container_width/3, 0),\n\t\t\t\tcc.moveBy(2, -(container_width/3), 0),\n\t\t\t\t));\n\t\tthis.prize_list_layout.node.runAction(this.shake_wawa_seq);\n\t},\n\tonLoad () {\n\t\t//先获取初始位置\n\t\tthis.orign_zhuazi_pos = this.zhuazi.node.position;\n\t\tthis.orign_zhuatop_pos = this.zhua_top.node.position;\n\t\tthis.orign_zhualine_pos = this.zhua_line.node.position;\n\t\tthis.prize_list_layout_pos = this.prize_list_layout.node.position;\n\t\tthis.orign_zhualine_height = this.zhua_line.node.height;\n\t\t// 获取数据\n\t\tthis.initData();\n\n\t},\n\tsendHttpReq(url,data,_cb){\n\t\tvar that = this;\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\n\t\t\t\tvar response = xhr.responseText;\n\t\t\t\t_cb(JSON.parse(response),response,that);\n\t\t\t}\n\t\t};\n\t\txhr.open(\"POST\", url, true);\n\t\txhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded;\");\n\t\tvar paramArr = [];\n\t\tfor(var tmp in data){\n\t\t\tparamArr.push(tmp + \"=\" + data[tmp]);\n\t\t}\n\t\tvar params = paramArr.join(\"&\");\n\t\txhr.send(params);\n\t},\n\tgetLotteryId(){\n\t\tvar la = window.location.href;\n\t\tvar start = la.indexOf(\"id/\");\n\t\tvar end = la.indexOf(\".html\");\n\t\tvar id = la.substr(start+3,end-start -3);\n\t\treturn id;\n\t},\n\tinitData(){\n\t\t\n\t\tvar id = this.getLotteryId();\n\t\tvar url = \"https://fssw.bichonfrise.cn/index.php/Wechat/Index/ajax_get_lottery\";\n\t\tvar data = {\n\t\t\tid:id,\n\t\t};\n\t\tthis.sendHttpReq(url,data,function(respObj,resp,gameObj){\n\t\t\t// 设置用户金币\n\t\t\tgameObj.coin_num.string = \"金币：\" + respObj['data']['user_coin_num'];\n\t\t\t// 设置专场名称\n\t\t\tgameObj.zhuanchang_name.string = respObj['data']['name'];\n\t\t\tgameObj.cost_num.string = respObj['data']['coin_num'] + \"金币/次\";\n\t\t\tgameObj.lottery_data = respObj;\n\t\t\t// 初始化娃娃\n\t\t\tfor (var i = 0; i < parseInt(respObj['data']['good_num']); i++) {\n\t\t\t\tvar wawa = cc.instantiate(gameObj.wawa_prefab);\n\t\t\t\twawa.setPosition(cc.p(0,0));\n\t\t\t\twawa.getComponent('good').setData(respObj['data']['lottery_good' + i]['name'],\n\t\t\t\t\trespObj['data']['lottery_good' + i]['img_url'])\n\t\t\t\tgameObj.prize_list_layout.node.addChild(wawa);\n\t\t\t}\n\t\t\tsetTimeout(function(){\n\t\t\t\tgameObj.shake();\n\t\t\t},500);\n\t\t\t\n\t\t})\n\t\tthis.shake();\n\t},\n\tzhuawawa_go(){\n\t\t//cc.audioEngine.play(this.audio_click,false);\n\t\tthis.zhuazi.node.stopAction(this.shake_zhuazi_seq);\n\t\tthis.zhua_top.node.stopAction(this.shake_zhuatop_seq);\n\t\tthis.zhua_line.node.stopAction(this.shake_zhualine_seq);\n\t\tthis.prize_list_layout.node.stopAction(this.shake_wawa_seq);\n\t\tvar prize_bar_height = this.prize_bar.node.height;\n\t\tvar zhuazi_height = this.zhuazi.node.height;\n\t\tvar target_y = this.prize_bar.node.position.y + prize_bar_height;\n\t\tvar target_x = this.zhuazi.node.position.x;\n\t\t//var zhuazi_action = cc.moveTo(0.1,target_x,target_y);\n\t\t//this.zhuazi.node.runAction(zhuazi_action);\n\t\tvar rotateX = 3;\n\t\tvar wawaZhantaiHeight = 297;\n\t\ttarget_y += wawaZhantaiHeight;\n\t\ttarget_y -= prize_bar_height;\n\t\tvar zhuazi_action = cc.sequence(\n\t\t\t\tcc.moveTo(0.1,target_x,target_y),\n\t\t\t\tcc.rotateTo(0.1,rotateX),\n\t\t\t\tcc.rotateTo(0.1,0.0),\n\t\t\t\tcc.rotateTo(0.1,-rotateX),\n\t\t\t\tcc.rotateTo(0.1,0.0),\n\t\t\t);\n\t\tthis.zhuazi.node.runAction(zhuazi_action);\n\t\tvar that = this;\n\n\t\t// setTimeout(function(){\n\t\t// \tthat.prize = cc.instantiate(that.wawa_prefab);\n\t\t// \tthat.prize.setPosition(cc.p(0,-zhuazi_height));\n\t\t// \tthat.zhuazi.node.addChild(that.prize);\n\t\t// \tsetTimeout(function(){\n\t\t// \t\tvar result = cc.instantiate(that.result_prefab);\n\t\t// \t\tresult.setPosition(cc.p(0,0));\n\t\t// \t\tresult.getComponent('result').setData(\"恭喜您抓到了小鹿非彼，已存入背包！\",\"\",function(){\n\t\t// \t\t\tthat.resetGame();\n\t\t// \t\t});\n\t\t// \t\tthat.node.addChild(result);\n\t\t// \t},800)\n\t\t// })\n\n\t\tthis.orign_zhualine_scale_y = (this.orign_zhualine_pos.y + this.zhua_line.node.height/2 - target_y - zhuazi_height/2)/this.orign_zhualine_height;\n\t\tvar half_win_height = cc.director.getWinSizeInPixels().height/2;\n\t\tvar win_fixed = half_win_height - this.orign_zhualine_pos.y\n\t\tvar target_y = (this.orign_zhualine_pos.y+ this.zhua_line.node.height/2) \n\t\t- (this.orign_zhualine_scale_y*this.zhua_line.node.height)/2;\n\t\tvar zhualine_x = this.zhua_line.node.x;\n\t\tvar zhualine_action = cc.spawn(\n\t\t\tcc.scaleTo(0.1,1,this.orign_zhualine_scale_y),\n\t\t\tcc.moveTo(0.1,zhualine_x,target_y)\n\t\t\t);\n\t\tthis.zhua_line.node.runAction(zhualine_action);\n\t\t\n\t\t//var zhuazi_action = cc.moveTo(0.1,target_x,target_y);\n\t\t//this.zhuazi.node.runAction(zhuazi_action);\n\t\t// 请求网络数据\n\t\tvar url = \"https://fssw.bichonfrise.cn/index.php/Wechat/Index/lottery\";\n\t\tvar id = this.getLotteryId();\n\t\tvar data = {\n\t\t\tid:id,\n\t\t}\n\t\tvar that = this;\n\t\tthis.sendHttpReq(url,data,function(respObj,resp,gameObj){\n\t\t\tgameObj.coin_num.string = \"金币：\" + respObj['data']['user_coin_num'];\n\t\t\tif (respObj['data']['good_name'] == \"\") {\n\t\t\t\tvar result = cc.instantiate(gameObj.result_prefab);\n\t\t\t\tresult.setPosition(cc.p(0,0));\n\t\t\t\tresult.getComponent('result').setData(respObj['data']['msg'],respObj['data']['good_url'],function(){\n\t\t\t\t\tthat.resetGame();\n\t\t\t\t})\n\t\t\t\tgameObj.node.addChild(result);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//抓到了\n\t\t\t\tvar result = cc.instantiate(gameObj.result_prefab);\n\t\t\t\tresult.setPosition(cc.p(0,0));\n\t\t\t\tresult.getComponent('result').setData(\"恭喜您抓到了\"+ respObj['data']['good_name'] + \"，已存入背包！\",respObj['data']['good_url'],function(){\n\t\t\t\t\tthat.resetGame();\n\t\t\t\t});\n\t\t\t\tgameObj.node.addChild(result);\n\t\t\t}\n\t\t\t\n\t\t})\n\t},\n\tzhuawawa(){\n\t\tif (this.zhua_click == 1) {\n\t\t\treturn;\n\t\t}\n\t\tthis.zhua_click = 1;\n\t\tcc.audioEngine.play(this.audio_readygo,false);\n\n\t\tvar that = this;\n\t\tvar rotateX = 2;\n\t\tvar zhuazi_action = cc.sequence(\n\t\t\t\tcc.rotateTo(0.1,rotateX),\n\t\t\t\tcc.rotateTo(0.1,0.0),\n\t\t\t\tcc.rotateTo(0.1,-rotateX),\n\t\t\t\tcc.rotateTo(0.1,0.0),\n\t\t\t\tcc.rotateTo(0.1,rotateX),\n\t\t\t\tcc.rotateTo(0.1,0.0),\n\t\t\t\tcc.rotateTo(0.1,-rotateX),\n\t\t\t\tcc.rotateTo(0.1,0.0),\n\t\t\t\tcc.rotateTo(0.1,rotateX),\n\t\t\t\tcc.rotateTo(0.1,0.0),\n\t\t\t);\n\t\tthis.zhuazi.node.runAction(zhuazi_action);\n\t\tsetTimeout(function(){\n\t\t\tthat.zhuawawa_go();\n\t\t},1200);\n\n\t},\n\tresetGame(){\n\t\tcc.audioEngine.play(this.audio_click,false);\n\t\tthis.zhua_line.node.height = 64;\n\t\tthis.zhua_line.node.scaleY = 1;\n\t\tthis.zhuazi.node.position = this.orign_zhuazi_pos;\n\t\tthis.zhua_top.node.position = this.orign_zhuatop_pos;\n\t\tthis.zhua_line.node.position = this.orign_zhualine_pos;\n\t\tthis.prize_list_layout.node.position = this.prize_list_layout_pos;\n\t\tthis.shake();\n\t\tthis.zhua_click = 0;\n\t\tthis.prize.destroy();\n\t},\n\tcharge(){\n\t\tthis.resetGame();\n\t\t//zhuawawa.charge();\n\t},\n\tdetail(){\n\t\tcc.audioEngine.play(this.audio_click,false);\n\t\tzhuawawa.show_detail(this.lottery_data);\n\t}\n\n\t// update (dt) {},\n});\n"]}