require=function a(s,c,u){function h(t,e){if(!c[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(r)return r(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=c[t]={exports:{}};s[t][0].call(o.exports,function(e){return h(s[t][1][e]||e)},o,o.exports,a,s,c,u)}return c[t].exports}for(var r="function"==typeof require&&require,e=0;e<u.length;e++)h(u[e]);return h}({game:[function(e,t,i){"use strict";cc._RF.push(t,"75d52VzxixEZbClr5yh2/2S","game"),cc.Class({extends:cc.Component,properties:{audio_click:{url:cc.AudioClip,default:null},zhua_line:{type:cc.Sprite,default:null},zhuazi:{type:cc.Sprite,default:null},zhua_top:{type:cc.Sprite,default:null},zhuanchang_name:{type:cc.Label,default:null},cost_num:{type:cc.Label,default:null},coin_num:{type:cc.Label,default:null},wawa_prefab:{type:cc.Prefab,default:null},result_prefab:{type:cc.Prefab,default:null},xiazhua_btn:cc.Button,shake_zhuazi_seq:null,shake_zhualine_seq:null,shake_zhuatop_seq:null,shake_wawa_seq:null,orign_zhuazi_pos:null,orign_zhualine_pos:null,orign_zhuatop_pos:null,prize_list_layout_pos:null,orign_zhualine_scale_y:0,prize_bar:{type:cc.Sprite,default:null},prize_list_layout:{type:cc.Layout,default:null},lottery_data:null,zhua_click:0},shake:function(){this.shake_zhuazi_seq=cc.repeatForever(cc.sequence(cc.moveBy(1,-100,0),cc.moveBy(1,100,0),cc.moveBy(1,100,0),cc.moveBy(1,-100,0))),this.shake_zhualine_seq=cc.repeatForever(cc.sequence(cc.moveBy(1,-100,0),cc.moveBy(1,100,0),cc.moveBy(1,100,0),cc.moveBy(1,-100,0))),this.shake_zhuatop_seq=cc.repeatForever(cc.sequence(cc.moveBy(1,-100,0),cc.moveBy(1,100,0),cc.moveBy(1,100,0),cc.moveBy(1,-100,0))),this.zhuazi.node.runAction(this.shake_zhuazi_seq),this.zhua_top.node.runAction(this.shake_zhuatop_seq),this.zhua_line.node.runAction(this.shake_zhualine_seq),this.prize_list_layout.node.setCascadeOpacityEnabled(!1),this.prize_list_layout.node.opacity=0;var e=this.prize_list_layout.node.width;console.log(e),this.shake_wawa_seq=cc.repeatForever(cc.sequence(cc.moveBy(2,-e/3,0),cc.moveBy(2,e/3,0),cc.moveBy(2,e/3,0),cc.moveBy(2,-e/3,0))),this.prize_list_layout.node.runAction(this.shake_wawa_seq)},onLoad:function(){this.orign_zhuazi_pos=this.zhuazi.node.position,this.orign_zhuatop_pos=this.zhua_top.node.position,this.orign_zhualine_pos=this.zhua_line.node.position,this.prize_list_layout_pos=this.prize_list_layout.node.position,this.orign_zhualine_height=this.zhua_line.node.height,this.initData()},sendHttpReq:function(e,t,i){var n=this,o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState&&200<=o.status&&o.status<400){var e=o.responseText;i(JSON.parse(e),e,n)}},o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;");var a=[];for(var s in t)a.push(s+"="+t[s]);var c=a.join("&");o.send(c)},getLotteryId:function(){var e=window.location.href,t=e.indexOf("id/"),i=e.indexOf(".html");return e.substr(t+3,i-t-3)},initData:function(){var e={id:this.getLotteryId()};this.sendHttpReq("https://fssw.bichonfrise.cn/index.php/Wechat/Christmas/ajax_get_christmas_activity",e,function(e,t,i){i.coin_num.string="糖豆："+e.data.user_coin_num,i.zhuanchang_name.string=e.data.name,i.cost_num.string=e.data.coin_num+"糖豆/次",i.lottery_data=e;for(var n=0;n<parseInt(e.data.good_num);n++){var o=cc.instantiate(i.wawa_prefab);o.setPosition(cc.p(0,0)),o.getComponent("good").setData(e.data["lottery_good"+n].name,e.data["lottery_good"+n].img_url),i.prize_list_layout.node.addChild(o)}setTimeout(function(){i.shake()},500)})},zhuawawa:function(){if(1!=this.zhua_click){this.zhua_click=1,cc.audioEngine.play(this.audio_click,!1),this.zhuazi.node.stopAction(this.shake_zhuazi_seq),this.zhua_top.node.stopAction(this.shake_zhuatop_seq),this.zhua_line.node.stopAction(this.shake_zhualine_seq),this.prize_list_layout.node.stopAction(this.shake_wawa_seq);var e=this.prize_bar.node.height,t=this.zhuazi.node.height,i=this.prize_bar.node.position.y+e,n=this.zhuazi.node.position.x,o=cc.moveTo(.1,n,i);this.zhuazi.node.runAction(o),this.orign_zhualine_scale_y=(this.orign_zhualine_pos.y+this.zhua_line.node.height/2-i-t/2)/this.orign_zhualine_height;cc.director.getWinSizeInPixels().height,this.orign_zhualine_pos.y,i=this.orign_zhualine_pos.y+this.zhua_line.node.height/2-this.orign_zhualine_scale_y*this.zhua_line.node.height/2;var a=this.zhua_line.node.x,s=cc.spawn(cc.scaleTo(.1,1,this.orign_zhualine_scale_y),cc.moveTo(.1,a,i));this.zhua_line.node.runAction(s);var c={id:this.getLotteryId()},u=this;this.sendHttpReq("https://fssw.bichonfrise.cn/index.php/Wechat/Christmas/christmas_activity",c,function(e,t,i){var n;(i.coin_num.string="糖豆："+e.data.user_coin_num,i.cost_num.string=e.data.coin_num+"糖豆/次",""==e.data.good_name)?((n=cc.instantiate(i.result_prefab)).setPosition(cc.p(0,0)),n.getComponent("result").setData(e.data.msg,e.data.good_url,function(){u.resetGame()}),i.node.addChild(n)):((n=cc.instantiate(i.result_prefab)).setPosition(cc.p(0,0)),n.getComponent("result").setData("恭喜您抓到了"+e.data.good_name+"，已存入背包！",e.data.good_url,function(){u.resetGame()}),i.node.addChild(n))})}},resetGame:function(){cc.audioEngine.play(this.audio_click,!1),this.zhua_line.node.height=64,this.zhua_line.node.scaleY=1,this.zhuazi.node.position=this.orign_zhuazi_pos,this.zhua_top.node.position=this.orign_zhuatop_pos,this.zhua_line.node.position=this.orign_zhualine_pos,this.prize_list_layout.node.position=this.prize_list_layout_pos,this.shake(),this.zhua_click=0},charge:function(){zhuawawa.charge()},detail:function(){cc.audioEngine.play(this.audio_click,!1),zhuawawa.show_detail(this.lottery_data)}}),cc._RF.pop()},{}],good:[function(e,t,i){"use strict";cc._RF.push(t,"e8c1cRLnANCuKCOs9FpC66t","good"),cc.Class({extends:cc.Component,properties:{good:{type:cc.Sprite,default:null},good_name:{type:cc.Label,default:null}},onLoad:function(){},setData:function(e,t){var n=this;this.good_name.string=e,cc.loader.load(t,function(e,t){var i=new cc.SpriteFrame(t);n.good.spriteFrame=i})},start:function(){}}),cc._RF.pop()},{}],result:[function(e,t,i){"use strict";cc._RF.push(t,"aa21dQ/CZ1OurlI1XXO6pNt","result"),cc.Class({extends:cc.Component,properties:{msg:cc.Label,good:cc.Sprite,audio_click:{url:cc.AudioClip,default:null},gameCallback:null},setData:function(e,t,i){var n=this;this.msg.string=e,this.gameCallback=i,cc.loader.load(t,function(e,t){var i=new cc.SpriteFrame(t);n.good.spriteFrame=i})},start:function(){},ok:function(){cc.audioEngine.play(this.audio_click,!1),this.node.destroy(),this.gameCallback()}}),cc._RF.pop()},{}]},{},["game","good","result"]);